#include <iostream>
using namespace std;

class Kruskal {
public:
    int parent[20];
    int rank[20];
    int u[50], v[50], w[50];
    int n, e;   

    Kruskal(int vertices, int edges) {
        n = vertices;
        e = edges;
    }

    void makeSet() {
        for (int i = 0; i < n; i++) {
            parent[i] = i;    
            rank[i] = 0;    
        }
    }

    int findSet(int x) {
        if (x != parent[x])
            parent[x] = findSet(parent[x]);  
        return parent[x];
    }

    void linkSet(int x, int y) {
        if (rank[x] > rank[y])
            parent[y] = x;
        else {
            parent[x] = y;
            if (rank[x] == rank[y])
                rank[y] = rank[y] + 1;
        }
    }

    void unionSet(int x, int y) {
        linkSet(findSet(x), findSet(y));
    }

    void sortEdges() {
        for (int i = 0; i < e - 1; i++) {
            for (int j = 0; j < e - i - 1; j++) {
                if (w[j] > w[j+1]) {
                   
                    int temp = u[j];
                    u[j] = u[j+1];
                    u[j+1] = temp;

                    temp = v[j];
                    v[j] = v[j+1];
                    v[j+1] = temp;

                    temp = w[j];
                    w[j] = w[j+1];
                    w[j+1] = temp;
                }
            }
        }
    }

    void kruskalMST() {
        makeSet();
        sortEdges();

        cout << "Edges in MST:\n";

        for (int i = 0; i < e; i++) {
            int setU = findSet(u[i]);
            int setV = findSet(v[i]);

            if (setU != setV) {      
                cout << u[i] << " - " << v[i] << " (weight = " << w[i] << ")\n";
                unionSet(setU, setV);
            }
        }
    }
};

int main() {
    int n, e;
    cout << "Enter number of vertices: ";
    cin >> n;
    cout << "Enter number of edges: ";
    cin >> e;

    Kruskal k(n, e);

    cout << "Enter edges (u v w):\n";
    for (int i = 0; i < e; i++)
        cin >> k.u[i] >> k.v[i] >> k.w[i];

    cout << "MST: \n";
    k.kruskalMST();

    return 0;
}
